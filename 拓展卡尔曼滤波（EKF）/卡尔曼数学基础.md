## 数据融合(Data Fusion)
给定若干个数据组，分别告诉你测量值$z_i$和测量方差 $\sigma_i$.
求$\hat{z}=z_1+k(z_2-z_1)$.
为了求k,我们让$Var(\hat{z})$最小即可.
$$Var(z)=Var(z_1+k(z_2-z_1))=Var((1-k)z_1+kz_2)$$
由于$z_1$和$z_2$相互独立，我们可以把方差拆开：
$$=Var((1-k)z_1)+Var(kz_2)=(1-k)^2\sigma_1+k^2\sigma_2$$
我们求k使方差最小：
$$K_k=\frac{\sigma_1^2}{\sigma_1^2+\sigma_2^2}$$
$$\sigma_{\hat{z}}^2=\frac{\sigma_1^4\sigma_2^2+\sigma_1^2\sigma_2^4}{(\sigma_1^2+\sigma_2^2)^2}$$
## 协方差矩阵
先复习一下什么是方差和协方差
$$Var(X)=E[X-E(X)][X-E(X)]$$
$$Cov(X,Y)=E[X-E(X)][Y-E(Y)]$$
协方差可以表示X和Y的线性相关度,若Cov(X,Y)>0,则X与Y正相关.
接下来介绍怎么求协方差矩阵：
假设有三个随机变量，不妨设$x,y,z$为三个随机变量对应的测量值向量，$shape=n\times 1$,那么
$$a=(x,y,z)-\frac{1}{3}\begin{pmatrix}1&1&1&...&1\\1&1&1&...&1\\1&1&1&...&1\end{pmatrix}(x,y,z)$$
$$P=\frac{1}{3}a^Ta$$
P即为协方差矩阵，$P_{ij}$表示随机变量i与随机变量j的协方差.
## 状态空间表达
将一个状态的实际值表示为一个向量，于是后一时刻的状态可以由前一时刻通过矩阵转移状态.
如$x_k=Ax_{k-1}+B\mu+\omega_{k-1}$,其中$\omega_{k-1}$为过程噪音,$\mu$为控制变量.
而测量值$z_k$可以和状态值建立关系：
$z_k=Hx_k+v_k$,其中$v_k$是测量噪音.
而卡尔曼滤波的目的就是已知$A,B,H$.尽可能求出误差小的$x_k$.